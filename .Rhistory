tm_raster()
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white")+
tm_shape(funda_data)+
tm_dots(c("ndvi500"), title = "NDVI (500m range)", size = 0.1) +
tm_layout(title = "Amsterdam NDVI values",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("ndvi500"), title = "NDVI (500m range)", size = 0.1) +
tm_layout(title = "Amsterdam NDVI values",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("ndvi500"), title = "NDVI (500m range)", size = 0.1) +
tm_layout(title = "Amsterdam NDVI values",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white" alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0..5) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.5) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.05) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.01) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(ndvi)+
tm_raster() +
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.01) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(PC4, bbox = bbox_new)+
tm_shape(ndvi)+
tm_raster() +
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.01) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.01) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.03) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.05) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.05) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 1,
legend.title.size = 1)
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.05) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 1,
legend.title.size = 1)
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.05) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
# bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
bbox_new[3] <- bbox_new[3] + (0.32 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.25 * yrange) # ymax - top
bbox_new <- bbox_new %>% # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon # looks better, does it?
library(stars)
ndvi <- read_stars("data/Greenness/NDVI_Amsterdam_500m.tif")
#plot dependent variable
# make some bbox magic
bbox_new <- st_bbox(PC4) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
# bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
bbox_new[3] <- bbox_new[3] + (0.32 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.25 * yrange) # ymax - top
bbox_new <- bbox_new %>% # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon # looks better, does it?
library(stars)
ndvi <- read_stars("data/Greenness/NDVI_Amsterdam_500m.tif")
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.05) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white")+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
# bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
#plot dependent variable
# make some bbox magic
bbox_new <- st_bbox(PC4) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
# bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.25 * yrange) # ymax - top
bbox_new <- bbox_new %>% # take the bounding box ...
st_as_sfc() # ... and make it a sf polygon # looks better, does it?
library(stars)
ndvi <- read_stars("data/Greenness/NDVI_Amsterdam_500m.tif")
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
ndvi <- read_stars("data/Greenness/NDVI_Amsterdam_100m.tif")
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
ndvi <- read_stars("data/Greenness/NDVI_Amsterdam_300m.tif")
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
ndvi <- read_stars("data/Greenness/NDVI_Amsterdam_100m.tif")
tm_shape(ndvi, bbox = bbox_new)+
tm_raster() +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0)+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)", breaks = c(0,1000,2500,5000,7500,10000,12500,15000,20000,30000), size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
easypackages::packages("tidyverse", "sf", "mapview", "RColorBrewer", "tmap", "spdep")
#Visualize results GWR model
gwr_result<- st_read("data/models/gwr_results_amsterdam_ndvi100_m2.gpkg")
#Visualize results GWR model
gwr_result<- st_read("data/models/gwr_results_amsterdam_ndvi100_m2.gpkg")
funda_data <- st_read("data/Houseprices/funda_buy_amsterdam_31-03-2023_full_distances.gpkg")
funda_data %>%
mapview( zcol = "price_m2", col.regions=brewer.pal(9, "YlOrRd"), at = seq(4000, 25000, 1000))
gwr_result %>%
filter(tram_dist_TV < -1.96| tram_dist_TV > 1.96) %>%
mapview( zcol = "tram_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(train_dist_TV < -1.96| train_dist_TV > 1.96) %>%
mapview( zcol = "train_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(metro_dist_TV < -1.96| metro_dist_TV > 1.96) %>%
mapview( zcol = "metro_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(ndvi300_TV < -1.91| ndvi300_TV > 1.91) %>%
mapview( zcol = "ndvi300", col.regions=brewer.pal(9, "YlOrRd"))
#Visualize results GWR model
gwr_result<- st_read("data/models/gwr_results_amsterdam_ndvi300_m2.gpkg")
funda_data <- st_read("data/Houseprices/funda_buy_amsterdam_31-03-2023_full_distances.gpkg")
funda_data %>%
mapview( zcol = "price_m2", col.regions=brewer.pal(9, "YlOrRd"), at = seq(4000, 25000, 1000))
gwr_result %>%
filter(tram_dist_TV < -1.96| tram_dist_TV > 1.96) %>%
mapview( zcol = "tram_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(train_dist_TV < -1.96| train_dist_TV > 1.96) %>%
mapview( zcol = "train_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(metro_dist_TV < -1.96| metro_dist_TV > 1.96) %>%
mapview( zcol = "metro_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(ndvi300_TV < -1.91| ndvi300_TV > 1.91) %>%
mapview( zcol = "ndvi300", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(school_dist_TV < -1.91| school_dist_TV > 1.91) %>%
mapview( zcol = "school_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(shops_dist_TV < -1.91| shops_dist_TV > 1.91) %>%
mapview( zcol = "shops_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(centre_dist_TV < -1.91| centre_dist_TV > 1.91) %>%
mapview( zcol = "centre_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(zuid_dist_TV < -1.91| zuid_dist_TV > 1.91) %>%
mapview( zcol = "zuid_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
mapview( zcol = "residual", col.regions=brewer.pal(9, "YlOrRd"))
funda_KNN <- knearneigh(funda_data, k=50) #Identify k nearest neighbours for spatial weights
funda_nbq_KNN <- knn2nb(funda_KNN, sym=T) #Neighbours list from knn object
funda_KNN_w <- nb2listw(funda_nbq_KNN, style="W", zero.policy = TRUE)
mc_gwr <- moran.mc(gwr_result$residual, funda_KNN_w, 2999, zero.policy= TRUE, alternative="greater")
mc_gwr
plot(mc_gwr)
funda_data %>%
ggplot(aes(y = price_m2, x = metro_dist)) + geom_point()
gwr_result %>%
filter(ndvi300_TV < -1.91| ndvi300_TV > 1.91) %>%
mapview( zcol = "ndvi300", col.regions=brewer.pal(9, "YlOrRd"))
mc_gwr <- moran.mc(funda_data$ndvi100, funda_KNN_w, 2999, zero.policy= TRUE, alternative="greater")
mc_gwr
mc_gwr <- moran.mc(funda_data$ndvi300, funda_KNN_w, 2999, zero.policy= TRUE, alternative="greater")
mc_gwr
funda_KNN <- knearneigh(funda_data, k=180) #Identify k nearest neighbours for spatial weights
funda_nbq_KNN <- knn2nb(funda_KNN, sym=T) #Neighbours list from knn object
funda_KNN_w <- nb2listw(funda_nbq_KNN, style="W", zero.policy = TRUE)
mc_gwr <- moran.mc(funda_data$ndvi300, funda_KNN_w, 2999, zero.policy= TRUE, alternative="greater")
mc_gwr
funda_KNN <- knearneigh(funda_data, k=50) #Identify k nearest neighbours for spatial weights
funda_nbq_KNN <- knn2nb(funda_KNN, sym=T) #Neighbours list from knn object
funda_KNN_w <- nb2listw(funda_nbq_KNN, style="W", zero.policy = TRUE)
mc_gwr <- moran.mc(funda_data$ndvi300, funda_KNN_w, 2999, zero.policy= TRUE, alternative="greater")
mc_gwr
mc_gwr <- moran.mc(gwr_result$residual, funda_KNN_w, 2999, zero.policy= TRUE, alternative="greater")
mc_gwr
#Visualize results GWR model
gwr_result<- st_read("data/models/mgwr_results_amsterdam_ndvi_m2.gpkg")
funda_data <- st_read("data/Houseprices/funda_buy_amsterdam_31-03-2023_full_distances.gpkg")
funda_data %>%
mapview( zcol = "price_m2", col.regions=brewer.pal(9, "YlOrRd"), at = seq(4000, 25000, 1000))
gwr_result %>%
filter(tram_dist_TV < -1.96| tram_dist_TV > 1.96) %>%
mapview( zcol = "tram_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(train_dist_TV < -1.96| train_dist_TV > 1.96) %>%
mapview( zcol = "train_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(metro_dist_TV < -1.96| metro_dist_TV > 1.96) %>%
mapview( zcol = "metro_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(ndvi300_TV < -1.91| ndvi300_TV > 1.91) %>%
mapview( zcol = "ndvi300", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(school_dist_TV < -1.91| school_dist_TV > 1.91) %>%
mapview( zcol = "school_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(shops_dist_TV < -1.91| shops_dist_TV > 1.91) %>%
mapview( zcol = "shops_dist", col.regions=brewer.pal(9, "YlOrRd"))
#Visualize results GWR model
gwr_result<- st_read("data/models/gwr_results_amsterdam_ndvi300_m2.gpkg")
funda_data <- st_read("data/Houseprices/funda_buy_amsterdam_31-03-2023_full_distances.gpkg")
funda_data %>%
mapview( zcol = "price_m2", col.regions=brewer.pal(9, "YlOrRd"), at = seq(4000, 25000, 1000))
gwr_result %>%
filter(tram_dist_TV < -1.96| tram_dist_TV > 1.96) %>%
mapview( zcol = "tram_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(train_dist_TV < -1.96| train_dist_TV > 1.96) %>%
mapview( zcol = "train_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(metro_dist_TV < -1.96| metro_dist_TV > 1.96) %>%
mapview( zcol = "metro_dist", col.regions=brewer.pal(9, "YlOrRd"))
gwr_result %>%
filter(ndvi300_TV < -1.91| ndvi300_TV > 1.91) %>%
mapview( zcol = "ndvi300", col.regions=brewer.pal(9, "YlOrRd"))
funda_data %>%
mapview( zcol = "ndv300", col.regions=brewer.pal(9, "YlOrRd"), at = seq(4000, 25000, 1000))
funda_data %>%
mapview( zcol = "ndvi300", col.regions=brewer.pal(9, "YlOrRd"), at = seq(4000, 25000, 1000))
funda_data %>%
mapview( zcol = "ndvi300", col.regions=brewer.pal(9, "YlOrRd"))
easypackages::packages("sf", "sp", "osmdata", "FNN", "tidyverse", "stars", "mapview", "raster")
library(raster)
y <- reclassify(raster100, cbind(-Inf, 0, NA), right=FALSE)
raster100 <- read_stars("data/Greenness/NDVI_Amsterdam_100m.tif")
y <- reclassify(raster100, cbind(-Inf, 0, NA), right=FALSE)
y <- reclassify(raster(raster100), cbind(-Inf, 0, NA), right=FALSE)
raster100[raster100< 0]
raster100<0
raster100$NDVI_Amsterdam_100m.tif
raster100$NDVI_Amsterdam_100m.tif < 0
raster100[raster100$NDVI_Amsterdam_100m.tif  < 0 ]
ndvi100 <- st_extract(raster100, funda_data)
View(ndvi100)
ndvi300 <- st_extract(raster300, funda_data)
raster100 <- read_stars("data/Greenness/NDVI_Amsterdam_100m.tif")
raster300 <- read_stars("data/Greenness/NDVI_Amsterdam_300m.tif")
raster500 <- read_stars("data/Greenness/NDVI_Amsterdam_500m.tif")
ndvi100 <- st_extract(raster100, funda_data)
ndvi300 <- st_extract(raster300, funda_data)
ndvi500 <- st_extract(raster500, funda_data)
View(ndvi300)
View(raster500)
View(ndvi500)
easypackages::packages("sf", "sp", "osmdata", "FNN", "tidyverse", "stars", "mapview")
############################################################ NDVI ######################################################
raster100 <- read_stars("data/Greenness/NDVI_Amsterdam_100m.tif")
ndvi100 <- st_extract(raster100, funda_data)
View(ndvi100)
