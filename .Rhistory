# Methodological overview
The way the data analysis was performed is described in the figure below. Below headers provide some insight into the steps that were taken during each phase.
![Overview of study area](Paper/figures/Methods.jpg)
easypackages::packages("tidyverse", "sf", "mapview", "RColorBrewer", "tmap", "car", "spdep", "spatialreg", "leafsync", "systemfonts", "stars")
#load data
funda_data <- st_read("data/Houseprices/funda_buy_amsterdam_31-03-2023_full_distances.gpkg")
PC4 <- st_transform(st_read("data/Amsterdam/PC4.json"), crs = 28992)
ndvi <- read_stars("data/Greenness/NDVI_Amsterdam_300m.tif")
#plot variables of interest
# Extend bbox for plots
bbox_new <- st_bbox(PC4) # current bounding box
xrange <- bbox_new$xmax - bbox_new$xmin # range of x values
yrange <- bbox_new$ymax - bbox_new$ymin # range of y values
# bbox_new[1] <- bbox_new[1] - (0.25 * xrange) # xmin - left
bbox_new[3] <- bbox_new[3] + (0.25 * xrange) # xmax - right
# bbox_new[2] <- bbox_new[2] - (0.25 * yrange) # ymin - bottom
bbox_new[4] <- bbox_new[4] + (0.25 * yrange) # ymax - top
bbox_new <- bbox_new %>%
st_as_sfc()
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new)+
tm_raster(palette = "YlGn", title = "NDVI value") +
tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", alpha = 0, border.col = "black")+
tm_layout(title = "Amsterdam NDVI values with 300m range",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
houseprices_plot <- tm_shape(PC4, bbox = bbox_new)+
tm_polygons(col = "white", border.col = "black")+
tm_shape(funda_data)+
tm_dots(c("price_m2"), title = "Price (m2)",
breaks = c(0,2500,5000,7500,10000,12500,15000,20000,30000),
size = 0.1) +
tm_layout(title = "Amsterdam house prices",
title.fontfamily = "cambria",
title.fontface = "bold",
legend.text.fontfamily = "cambria",
legend.title.fontfamily = "cambria",
legend.position = c("right", "top"),
legend.text.size = 0.75,
legend.title.size = 1)
tmap_arrange(ndvi_plot,houseprices_plot, asp = NULL, ncol = 2)
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(PC4) +
tm_polygons()
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(PC4) +
tm_polygons(color = 'lightgrey') +
tm_shape(ndvi) +
tm_raster('ndvi300')
tm_shape(PC4) +
tm_polygons()
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi) +
tm_raster('ndvi300') +
tm_shape(PC4) +
tm_polygons()
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi) +
tm_raster() +
tm_shape(PC4) +
tm_polygons()
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi) +
tm_raster(palette = "YlGn", title = "NDVI value") +
tm_shape(PC4) +
tm_polygons(col = 'white', alpha = 0, border.col = "black")
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI value") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black")
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI value") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.position = c("right", "top"))
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.position = c("right", "top"),
legend.outside = T)
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.outside = T)
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.outside = T,
frame = F)
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.outside = T,
legend.position.outside = c(0.03, -0.01),
frame = F)
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.outside = T,
frame = F,
legend.outside.position = c(0.03, 0.01))
ndvi_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.outside = T,
frame = F)
ndvi_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey')
house_plot
ndvi_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.2)
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.1)
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.05)
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.05,
palette = 'Spectral')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.05,
palette = 'YiOrRd')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.05,
palette = 'YlOrRd')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.05,
shape = 21,
palette = 'YlOrRd')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.1,
shape = 21,
palette = 'YlOrRd')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.1,
shape = 21,
palette = 'YlOrRd',
title = 'Property Price (per m²)')
house_plot
house_plot <- tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'lightgrey') +
tm_shape(funda_data) +
tm_dots(col = 'price_m2',
size = 0.1,
shape = 21,
palette = 'YlOrRd',
title = 'Property Price (per m²)') +
tm_layout(legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.outside = T,
frame = F)
house_plot
#obtain maps for paper representing spatial variability and non-stationarity
ndvi_plot <- tm_shape(ndvi, bbox = bbox_new) +
tm_raster(palette = "YlGn", title = "NDVI") +
tm_shape(PC4, bbox = bbox_new) +
tm_polygons(col = 'white', alpha = 0, border.col = "black") +
tm_layout(title = 'A - Urban Green Spaces',
legend.text.fontfamily = "Times",
legend.title.fontfamily = "Times",
legend.outside = T,
frame = F)
ndvi_plot
